(function(e){function t(t){for(var a,l,s=t[0],o=t[1],u=t[2],p=0,h=[];p<s.length;p++)l=s[p],Object.prototype.hasOwnProperty.call(i,l)&&i[l]&&h.push(i[l][0]),i[l]=0;for(a in o)Object.prototype.hasOwnProperty.call(o,a)&&(e[a]=o[a]);c&&c(t);while(h.length)h.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],a=!0,s=1;s<n.length;s++){var o=n[s];0!==i[o]&&(a=!1)}a&&(r.splice(t--,1),e=l(l.s=n[0]))}return e}var a={},i={index:0},r=[];function l(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.m=e,l.c=a,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)l.d(n,a,function(t){return e[t]}.bind(null,a));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],o=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var c=o;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("c31f")},7473:function(e,t,n){},c31f:function(e,t,n){"use strict";n.r(t);var a=n("430a"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("el-table-admin-page",e._b({ref:"elTableAdminPage",attrs:{columns:e.columns,"table-data":e.tableData},on:{searchList:e.getPage,"size-change":e.sizeChange,"current-change":e.currentChange},scopedSlots:e._u([{key:"searchLeft",fn:function(t){var a=t.entitys,i=t.index;return[n("el-input",{attrs:{placeholder:"请输入搜索内容"},model:{value:a[i].queryValue,callback:function(t){e.$set(a[i],"queryValue",t)},expression:"entitys[index].queryValue"}})]}},{key:"columnEspecial",fn:function(t){var a=t.column,i=t.row;return[["operation"].includes(a.prop)?[n("el-button",{attrs:{type:"primary",plain:"",size:"mini"}},[e._v("编辑")])]:[e._v(e._s(i[a.prop]))]]}}])},"el-table-admin-page",e.pageParams,!1,!0),[n("template",{slot:"searchRight"},[n("el-button",{attrs:{type:"primary"}},[e._v("新增")])],1)],2)],1)},r=[],l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-table-admin-page"},[e.searchShow?n("div",{staticClass:"search-wriper"},[n("div",{staticClass:"search-left"},[n("div",{staticClass:"search-item-box"},[n("div",{staticClass:"search-item-top",class:{"border-custom":e.entitys.every((function(e){return!0===e.show}))}},e._l(e.entitys,(function(t,a){return n("div",{key:a,staticClass:"search-item"},[n("el-collapse-transition",[n("transition",{attrs:{name:"el-zoom-in-top"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:0===a||t.show,expression:"index === 0 ? true : entity.show"}],staticClass:"search-content"},[n("el-select",{attrs:{placeholder:"请选择","value-key":"prop",clearable:""},model:{value:t.querySelect,callback:function(n){e.$set(t,"querySelect",n)},expression:"entity.querySelect"}},e._l(e.entitysSelection,(function(e){return n("el-option",{key:e.prop,attrs:{label:e.label,value:e.prop}})})),1),e._t("searchLeft",null,{entitys:e.entitys,index:a}),0===a?n("div",{staticClass:"add-entity",on:{click:e.addEntity}},[n("i",{staticClass:"el-icon-plus"})]):e._e(),0!==a?n("div",{staticClass:"add-entity",on:{click:function(t){return e.deleteEntity(a)}}},[n("i",{staticClass:"el-icon-minus"})]):e._e()],2)])],1)],1)})),0),n("el-button",{staticStyle:{height:"40px"},attrs:{type:"primary"},nativeOn:{click:function(t){return e.searchList(!0)}}},[e._v("查询")])],1)]),e._t("searchRight")],2):e._e(),n("el-table",e._g(e._b({attrs:{data:e.tableData,"header-align":"right"}},"el-table",e.$attrs,!1),e.$listeners),[e._l(e.columns,(function(t){return[["selection"].includes(t.type)?n("el-table-column",e._b({key:t.prop,attrs:{align:t.align||"center",width:t.width||50}},"el-table-column",t,!1)):e._e(),["index"].includes(t.type)?n("el-table-column",e._b({key:t.prop,attrs:{label:t.label||"序号",width:t.width||50,align:t.align||"center",index:function(t){return t+(e.currentPage-1)*e.pageSize+1}}},"el-table-column",t,!1)):e._e(),["selection","index"].includes(t.type)?e._e():n("el-table-column",e._b({key:t.prop,attrs:{"header-align":t.headerAlign||"center","show-overflow-tooltip":t.showOverflowTooltip||!0,"min-width":t.width||e.flexColumnWidth(t)},scopedSlots:e._u([{key:"default",fn:function(n){var a=n.row;return[e._t("columnEspecial",null,{column:t,row:a})]}}],null,!0)},"el-table-column",t,!1),[t.children?e._l(t.children,(function(a){return n("el-table-column",e._b({key:a.prop,attrs:{"header-align":t.headerAlign||"center","min-width":a.width||e.flexColumnWidth(a)},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[e._t("columnEspecial",null,{column:a,row:n})]}}],null,!0)},"el-table-column",a,!1))})):e._e()],2)]}))],2),e.paginationShow?n("el-pagination",e._g(e._b({staticClass:"pagination",attrs:{layout:"total, sizes, prev, pager, next, jumper"}},"el-pagination",e.$attrs,!1),e.$listeners)):e._e()],1)},s=[],o=n("15bd"),u=(n("0fb4"),n("5580"),n("6931"),n("9896"),n("2871"),n("5720"),n("a675"),{name:"elTableAdminPage",inheritAttrs:!1,props:{columns:{type:Array,default:function(){return[]}},tableData:{type:Array,default:function(){return[]}},searchShow:{type:Boolean,default:!0},currentPage:{type:Number,default:1},pageSize:{type:Number,default:10}},data:function(){return{entitys:[{querySelect:"",queryValue:"",show:!1}],paginationShow:!0}},computed:{entitysSelection:function(){var e=[],t=function t(n){n.map((function(n){n.children?t(n.children):e.push(n)}))};return t(this.columns.filter((function(e){return!1!==e.search&&!["selection","index","expand"].includes(e.type)}))),e}},watch:{entitysSelection:{handler:function(e){this.entitys[0].querySelect=e[0].prop},deep:!0,immediate:!0}},created:function(){var e=this;this.watchMethod(),this.$watch((function(){return e.entitys.length}),(function(){e.watchMethod()}))},methods:{watchMethod:function(){var e=this;this.entitys.map((function(t){e.$watch((function(){return t.querySelect}),(function(e,n){e.prop!==n.prop&&(t.queryValue="")}))}))},addEntity:function(){this.entitys.length<=this.columns.filter((function(e){return!1!==e.search})).length-1?(this.entitys.push({querySelect:"",queryValue:"",show:!0}),this.entitys.map((function(e){e.show=!0}))):this.$message({type:"info",message:"当前搜索条件已达上限"})},deleteEntity:function(e){this.entitys.splice(e,1),1===this.entitys.length&&(this.entitys[0].show=!1)},clearEntity:function(){this.entitys.map((function(e){e.querySelect="",e.queryValue=""}))},flexColumnWidth:function(e){var t,n=e.label||"",a=0,i=Object(o["a"])(n);try{for(i.s();!(t=i.n()).done;){var r=t.value;a+=r>="A"&&r<="Z"||r>="a"&&r<="z"?8:r>="一"&&r<="龥"?16:5}}catch(l){i.e(l)}finally{i.f()}return a<70&&(a=70),a},searchList:function(e){var t=this;this.entitys.map((function(e){e.show=!1})),this.paginationShow=!1,this.$nextTick((function(){t.paginationShow=!0,e&&t.$emit("update:currentPage",1)})),this.$emit("searchList",this.entitys)},toggleEntityShow:function(){this.entitys.map((function(e,t){0!==t&&(e.show=!e.show)}))}}}),c=u,p=(n("eede"),n("4ac2")),h=Object(p["a"])(c,l,s,!1,null,"4ed9883a",null),d=h.exports,f={components:{elTableAdminPage:d},name:"App",data(){return{columns:[{type:"selection"},{type:"index"},{label:"测试二级表头",children:[{label:"第一季度靠左",prop:"first"},{label:"第二季度居中",prop:"second",align:"center"},{label:"第三季度靠右",prop:"three",align:"right"}]},{label:"测试表头自适应生成的宽度",prop:"name",align:"center"},{columnKey:"id",label:"测试固定宽度",prop:"date",width:"130",align:"center"},{label:"省份",prop:"province",align:"center"},{label:"市区",prop:"city",align:"center"},{label:"地址",prop:"address",showOverflowTooltip:!0},{label:"邮编",prop:"zip",feildType:"STRING",queryType:"LIKE",isnull:!0,form:!0,search:!0},{label:"操作",prop:"operation",form:!1,search:!1,align:"center",showOverflowTooltip:!1}],pageParams:{currentPage:1,pageSize:10,total:0},tableData:[]}},mounted(){this.getPage()},methods:{getPage(e){const t={...this.pageParams,entitys:e||this.$refs["elTableAdminPage"]&&this.$refs["elTableAdminPage"].entitys};console.log(t),setTimeout(()=>{let e;this.pageParams.total||(this.pageParams.total=9*this.pageParams.pageSize+Math.floor(Math.random()*(this.pageParams.pageSize-1+1)+1)),e=this.pageParams.currentPage===Math.ceil(this.pageParams.total/this.pageParams.pageSize)?this.pageParams.total%this.pageParams.pageSize:this.pageParams.pageSize,this.tableData=Array.from({length:e},(e,t)=>({date:(new Date).getTime(),name:t+1+" https://shenzjd.com",province:t+1+"深圳",city:t+1+"宝安区",address:t+1+"上海市普陀区金沙江路 1518 弄",zip:""+(t+1),first:"一季度"+(t+1),second:"二季度"+(t+1),three:"三季度"+(t+1)}))},100)},sizeChange(e){this.pageParams.pageSize=e,this.getPage()},currentChange(e){"number"===typeof e&&(this.pageParams.currentPage=e,this.getPage())}}},m=f,y=Object(p["a"])(m,i,r,!1,null,null,null),g=y.exports,b=n("a68a"),w=(n("eeee"),n("681a")),v=n.n(w);n("389c");d.install=function(e){e.component(d.name,d)};var _=d,P=[_],S=function e(t){e.installed||P.map((function(e){return t.component(e.name,e)}))};"undefined"!==typeof window&&window.vue&&S(window.vue);var x={install:S,elTableAdminPage:_};a["default"].use(b["Table"]),a["default"].use(b["TableColumn"]),a["default"].use(b["Button"]),a["default"].use(b["Pagination"]),a["default"].use(b["Select"]),a["default"].use(b["Option"]),a["default"].use(b["Input"]),a["default"].prototype.$message=b["Message"],a["default"].component(v.a.name,v.a),a["default"].use(x),new a["default"]({render:e=>e(g)}).$mount("#app")},eede:function(e,t,n){"use strict";n("7473")}});
//# sourceMappingURL=index.c1489a2d.js.map